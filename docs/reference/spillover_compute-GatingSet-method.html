<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Compute Spillover Matrix - GatingSet Method — spillover_compute,GatingSet-method • CytoRSuite</title>

<!-- favicons -->
<link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png" />
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png" />
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png" />
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png" />
<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script>
<!-- Bootstrap -->

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha256-916EbMg70RQy9LHiGkXzG8hSg9EdNy97GazNG/aiY1w=" crossorigin="anonymous" />
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha256-U5ZEeKfGNOja007MMD3YBI0A3OSZOQbeG6z2f2Y0hu8=" crossorigin="anonymous"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" integrity="sha256-eZrrJcwDc/3uDhsdt61sL2oOBY362qM3lon1gyExkL0=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.4/clipboard.min.js" integrity="sha256-FiZwavyI2V6+EXO1U+xzLG3IKldpiTFf3153ea9zikQ=" crossorigin="anonymous"></script>

<!-- sticky kit -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/sticky-kit/1.1.3/sticky-kit.min.js" integrity="sha256-c4Rlo1ZozqTPE2RLuvbusY3+SU1pQaJC0TjuhygMipw=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>



<meta property="og:title" content="Compute Spillover Matrix - GatingSet Method — spillover_compute,GatingSet-method" />

<meta property="og:description" content="spillover_compute uses the method described by Bagwell &amp;amp; Adams 1993 to
calculate the fluorescent spillover matrix using a reference universal
unstained control and single stain compensation controls." />

<meta property="og:image" content="/logo.png" />
<meta name="twitter:card" content="summary" />



<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->


  </head>

  <body>
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">CytoRSuite</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">1.0.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../index.html">
    <span class="fa fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../articles/CytoRSuite.html">Get started</a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="../articles/CytoRSuite-Compensation.html">CytoRSuite: Compensation of Fluorescent Spillover</a>
    </li>
    <li>
      <a href="../articles/CytoRSuite-Gate-Manipulation.html">CytoRSuite: Gate Manipulation</a>
    </li>
    <li>
      <a href="../articles/CytoRSuite-Gating-Functions.html">CytoRSuite: Gating Functions</a>
    </li>
    <li>
      <a href="../articles/CytoRSuite-Manual-Automated-Gating.html">CytoRSuite: Manual and Automated Gating</a>
    </li>
    <li>
      <a href="../articles/CytoRSuite-Visualisation.html">CytoRSuite: Visualisation Using cyto_plot</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
      
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/DillonHammill/CytoRSuite">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      
      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Compute Spillover Matrix - GatingSet Method</h1>
    <small class="dont-index">Source: <a href='https://github.com/DillonHammill/CytoRSuite/blob/master/R/spillover_compute-methods.R'><code>R/spillover_compute-methods.R</code></a></small>
    <div class="hidden name"><code>spillover_compute-GatingSet-method.Rd</code></div>
    </div>

    <div class="ref-description">
    
    <p><code>spillover_compute</code> uses the method described by Bagwell &amp; Adams 1993 to
calculate the fluorescent spillover matrix using a reference universal
unstained control and single stain compensation controls.</p>
    
    </div>

    <pre class="usage"><span class='co'># S4 method for GatingSet</span>
<span class='fu'><a href='spillover_compute.html'>spillover_compute</a></span>(<span class='no'>x</span>, <span class='kw'>parent</span> <span class='kw'>=</span> <span class='kw'>NULL</span>,
  <span class='kw'>axes_trans</span> <span class='kw'>=</span> <span class='kw'>NULL</span>, <span class='kw'>channel_match</span> <span class='kw'>=</span> <span class='kw'>NULL</span>,
  <span class='kw'>spillover</span> <span class='kw'>=</span> <span class='st'>"Spillover-Matrix.csv"</span>, <span class='no'>...</span>)</pre>
    
    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>x</th>
      <td><p>object of class
<code><a href='https://www.rdocumentation.org/packages/flowWorkspace/topics/GatingSet-class'>GatingSet</a></code> containing pre-gated
single stain compensation controls and a universal unstained control.
Currently, spillover_compute does not pre-gate samples to obtain a
homogeneous cell population for downstream calculations. We therefore
recommend pre-gating samples based on FSC and SSC parameters prior to
passing them to spillover_compute and indicate the population of interest
using the <code>parent</code> argument.</p></td>
    </tr>
    <tr>
      <th>parent</th>
      <td><p>name of the pre-gated population to use for downstream
calculations, set to the last node of the GatingSet by default (e.g.
"Single Cells").</p></td>
    </tr>
    <tr>
      <th>axes_trans</th>
      <td><p>object of class
<code><a href='https://www.rdocumentation.org/packages/flowWorkspace/topics/transformerList'>transformerList</a></code> generated by
<code>estimateLogicle</code> to transform fluorescent channels for gating.
<code>axes_trans</code> is required if logicle transformation has already been
applied to <code>x</code> using estimateLogicle. <code>spillover_compute</code> will
automatically call <code><a href='https://www.rdocumentation.org/packages/flowCore/topics/logicleTransform'>estimateLogicle</a></code>
internally to transform channels prior to gating, if <code>axes_trans</code> is
supplied it will be used for the transformation instead.</p></td>
    </tr>
    <tr>
      <th>channel_match</th>
      <td><p>name of .csv file containing the names of the samples in
a column called "name" and their matching channel in a column called
"channel". <code>spillover_compute</code> will the guide you through the channel
selection process and generate a channel match file called
"Compensation-Channels.csv" automatically. If you already have a complete
channel_match and would like to bypass the channel selection process,
simply pass the name of the channel_match to this argument (e.g.
"Compensation-Channels.csv").</p></td>
    </tr>
    <tr>
      <th>spillover</th>
      <td><p>name of the output spillover csv file, set to
<code>"Spillover-Matrix.csv"</code> by default.</p></td>
    </tr>
    <tr>
      <th>...</th>
      <td><p>additional arguments passed to
<code><a href='cyto_plot-flowFrame-method.html'>cyto_plot,flowFrame-method</a></code>.</p></td>
    </tr>
    </table>
    
    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p>spillover matrix object and <code>"Spillover-Matrix.csv"</code> file.</p>
    
    <h2 class="hasAnchor" id="details"><a class="anchor" href="#details"></a>Details</h2>

    <p>Calculate spillover matrix using
<code><a href='https://www.rdocumentation.org/packages/flowWorkspace/topics/GatingSet-class'>GatingSet</a></code> containing gated
single stain compensation controls and an unstained control.
<code>spillover_compute</code> uses the method described by Bagwell &amp; Adams 1993 to
calculate fluorescent spillover values using single stain compensation
controls and a universal unstained control. <code>spillover_compute</code> begins
by the user selecting which fluorescent channel is associated with each
control from a dropdown menu. Following channel selection,
<code>spillover_compute</code> runs through each control and plots the density
distribution of the unstained control in red and the compensation control in
blue. Users can then gate the positive signal for spillover calculation using
an interval gate. The percentage spillover is calculated based on the median
fluorescent intensities of the stained populations and the universal
unstained sample. The computed spillover matrix is returned as an R object
and written to a named .csv file for future use.</p>
    
    <h2 class="hasAnchor" id="references"><a class="anchor" href="#references"></a>References</h2>

    <p>C. B. Bagwell \&amp; E. G. Adams (1993). Fluorescence spectral
  overlap compensation for any number of flow cytometry parameters. in:
  Annals of the New York Academy of Sciences, 677:167-184.</p>
    
    <h2 class="hasAnchor" id="see-also"><a class="anchor" href="#see-also"></a>See also</h2>

    <div class='dont-index'><p><code><a href='cyto_plot-flowFrame-method.html'>cyto_plot,flowFrame-method</a></code>.</p></div>
    

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'><span class='fu'><a href='https://www.rdocumentation.org/packages/base/topics/library'>library</a></span>(<span class='no'>CytoRSuiteData</span>)

<span class='co'># Bypass directory check for external files</span>
<span class='fu'><a href='https://www.rdocumentation.org/packages/base/topics/options'>options</a></span>(<span class='st'>"CytoRSuite_wd_check"</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>)

<span class='co'># Don't run - skips the gating process</span>
<span class='fu'><a href='https://www.rdocumentation.org/packages/base/topics/options'>options</a></span>(<span class='st'>"CytoRSuite_interact"</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>)

<span class='co'># Load in compensation controls</span>
<span class='no'>fs</span> <span class='kw'>&lt;-</span> <span class='no'>Compensation</span>
<span class='no'>gs</span> <span class='kw'>&lt;-</span> <span class='fu'>GatingSet</span>(<span class='no'>Compensation</span>)</div><div class='output co'>#&gt; <span class='message'>.</span></div><div class='output co'>#&gt; <span class='message'>.</span></div><div class='output co'>#&gt; <span class='message'>.</span></div><div class='output co'>#&gt; <span class='message'>.</span></div><div class='output co'>#&gt; <span class='message'>.</span></div><div class='output co'>#&gt; <span class='message'>.</span></div><div class='output co'>#&gt; <span class='message'>done!</span></div><div class='input'>
<span class='co'># Gate using gate_draw</span>
<span class='no'>gt</span> <span class='kw'>&lt;-</span> <span class='no'>Compensation_gatingTemplate</span>
<span class='fu'>gating</span>(<span class='no'>gt</span>, <span class='no'>gs</span>)</div><div class='output co'>#&gt; <span class='message'>Preprocessing for 'Cells'</span></div><div class='output co'>#&gt; <span class='message'>Gating for 'Cells'</span></div><div class='output co'>#&gt; <span class='message'>done.</span></div><div class='output co'>#&gt; <span class='message'>Preprocessing for 'Single Cells'</span></div><div class='output co'>#&gt; <span class='message'>Gating for 'Single Cells'</span></div><div class='output co'>#&gt; <span class='message'>done.</span></div><div class='output co'>#&gt; <span class='message'>finished.</span></div><div class='input'>
<span class='co'># Channel match fille</span>
<span class='no'>cmfile</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='https://www.rdocumentation.org/packages/base/topics/system.file'>system.file</a></span>(<span class='st'>"extdata"</span>,
  <span class='st'>"Compensation-Channels.csv"</span>,
  <span class='kw'>package</span> <span class='kw'>=</span> <span class='st'>"CytoRSuiteData"</span>
)

<span class='co'># Compute fluorescent spillover matrix</span>
<span class='no'>spill</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='spillover_compute.html'>spillover_compute</a></span>(<span class='no'>gs</span>,
  <span class='kw'>parent</span> <span class='kw'>=</span> <span class='st'>"Single Cells"</span>,
  <span class='kw'>channel_match</span> <span class='kw'>=</span> <span class='no'>cmfile</span>,
  <span class='kw'>spillover</span> <span class='kw'>=</span> <span class='st'>"Example-spillover.csv"</span>
)</div><div class='img'><img src='spillover_compute-GatingSet-method-1.png' alt='' width='700' height='433' /></div><div class='img'><img src='spillover_compute-GatingSet-method-2.png' alt='' width='700' height='433' /></div><div class='img'><img src='spillover_compute-GatingSet-method-3.png' alt='' width='700' height='433' /></div><div class='img'><img src='spillover_compute-GatingSet-method-4.png' alt='' width='700' height='433' /></div><div class='img'><img src='spillover_compute-GatingSet-method-5.png' alt='' width='700' height='433' /></div><div class='input'>
<span class='co'># Compensate samples</span>
<span class='no'>gs</span> <span class='kw'>&lt;-</span> <span class='fu'>compensate</span>(<span class='no'>gs</span>, <span class='no'>spill</span>)

<span class='co'># Return CytoRSuite_wd_check to default</span>
<span class='fu'><a href='https://www.rdocumentation.org/packages/base/topics/options'>options</a></span>(<span class='st'>"CytoRSuite_wd_check"</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>)

<span class='co'># Return CytoRSuite_interact to default</span>
<span class='fu'><a href='https://www.rdocumentation.org/packages/base/topics/options'>options</a></span>(<span class='st'>"CytoRSuite_interact"</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>)</div></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
    <h2>Contents</h2>
    <ul class="nav nav-pills nav-stacked">
      <li><a href="#arguments">Arguments</a></li>
      
      <li><a href="#value">Value</a></li>

      <li><a href="#details">Details</a></li>

      <li><a href="#references">References</a></li>

      <li><a href="#see-also">See also</a></li>
      
      <li><a href="#examples">Examples</a></li>
    </ul>

    <h2>Author</h2>
    <p>Dillon Hammill, <a href='mailto:Dillon.Hammill@anu.edu.au'>Dillon.Hammill@anu.edu.au</a></p>
  </div>
</div>

      <footer>
      <div class="copyright">
  <p>Developed by Dillon Hammill.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.3.0.9000.</p>
</div>
      </footer>
   </div>

  

  </body>
</html>

